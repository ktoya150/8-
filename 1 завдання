using System;


public delegate void BalanceChangedHandler(decimal newBalance);


public class BankAccount
{
    private decimal balance;

    public event BalanceChangedHandler BalanceChangedDeposit;
    public event BalanceChangedHandler BalanceChangedWithdraw;

    public void Deposit(decimal amount)
    {
        balance += amount;
        BalanceChangedDeposit?.Invoke(balance);
    }

    public void Withdraw(decimal amount)
    {
        if (amount <= balance)
        {
            balance -= amount;
            BalanceChangedWithdraw?.Invoke(balance);
        }
        else
        {
            Console.WriteLine("Недостатньо коштів на рахунку.");
        }
    }
}


public class AccountMonitor
{
    public void OnBalanceChanged(decimal newBalance)
    {
        Console.WriteLine($"🔔 Баланс змінено. Новий баланс: {newBalance} грн");
    }
}


class Program
{
    static void Main()
    {
        BankAccount account = new BankAccount();
        AccountMonitor monitor = new AccountMonitor();

       
        account.BalanceChangedDeposit += monitor.OnBalanceChanged;
        account.BalanceChangedWithdraw += monitor.OnBalanceChanged;

        
        account.Deposit(1000);
        account.Withdraw(300);
        account.Withdraw(800); 
    }
}
